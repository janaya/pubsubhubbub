<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type='text/xsl' href='http://xml.resource.org/authoring/rfc2629.xslt' ?>
<!DOCTYPE rfc SYSTEM "rfc2629.dtd">

<!--
  For editting this, see:

  http://xml.resource.org/public/rfc/html/rfc2629.html

  In a nutshell,

  $ sudo apt-get install xml2rfc
  $ xml2rfc pubsubhubbub-core-0.1.xml pubsubhubbub-core-0.1.html

-->

<rfc category="info" ipr="full3978" docName="pubsubhubbub-core-0.1.xml">

  <?rfc toc="yes" ?>
  <?rfc tocdepth="2" ?>
  <?rfc symrefs="yes" ?>
  <?rfc sortrefs="yes"?>
  <?rfc strict="yes" ?>
  <?rfc iprnotified="no" ?>
  <?rfc private="Final" ?>

  <front>
    <title>PubSubHubbub Core 0.1 -- Working Draft</title>

    <author initials="" surname="PubSubHubbub" fullname="PubSubHubbub Team">
      <organization />
      <address>
        <email>pubsubhubbub@googlegroups.com</email>
      </address>
    </author>

    <date day="13" month="April" year="2009"/>

    <abstract>
      <t>
        An open, simple web-scale pubsub protocol, along with an open
        source reference implentation targetting Google App Engine.
        Notably, however, nothing in the protocol is centralized, or
        Google- or App Engine-specific.  Anybody can play.
      </t>
      <t>
	As opposed to more developed (and more complex) pubsub specs
	like XEP-0060, this spec's base profile (the barrier-to-entry
	to speak it) is dead simple.  The fancy bits required for
	high-volume publishers and subscribers are optional.  The base
	profile is HTTP-based, as opposed to XMPP (see more on this
	below).
      </t>
      <t>
	To dramatically simplify the spec in several places where we had to
	choose between supporting A or B, we took it upon ourselves to say
	"only A", rather than making it an implementation decision.
      </t>
      <t>
	We offer this spec in hopes that it fills a need or at least advances
	the state of the discussion in the pubsub space.  Polling sucks.  We
	think a decentralized pubsub layer is a fundamental, missing layer in
	the Internet architecture today and its existence, more than just
	enabling the obvious lower latency feed readers, would enable many
	cool applications, most of which we can't even imagine.  But we're
	looking forward to decentralized social networking.
      </t>
    </abstract>

  </front>
  <middle>

    <section title="Authors">
      <t>
        <list style='empty'>
          <t>Brad Fitzpatrick (brad@danga.com)</t>
          <t>Brett Slatkin (bslatkin@gmail.com)</t>
        </list>
      </t>
    </section>

    <section title="Notation and Conventions">
      <t>
        The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
        "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
        document are to be interpreted as described in <xref target="RFC2119" />.
        Domain name examples use <xref target="RFC2606" />.
      </t>
    </section>

    <section title="Definitions">
      <t>
        <list style="hanging">
          <t hangText="Topic:">
            an Atom feed URL.  The unit to which one can subscribe to
	    changes.  RSS isn't supported for simplicity.  Further, the spec
	    currently only addresses public (unauthenticated) Atom feed URLs.
          </t>
          <t hangText="Pubsub Hub (&quot;the hub&quot;):">
	    the server (URL) which implements both sides of this
	    protocol.  We're currently implementing this and running
	    at server at http://pubsubhubbub.appspot.com/ that's at
	    least for now open for anybody to use, as either a
	    publisher or subscriber.  Any hub is free to implement its
	    own policies on who can use it.
          </t>
          <t hangText="Publisher:">
            an owner of a topic.  Notifies the pubsub hub when the
	    topic (Atom feed) has been updated.  Just notifies that it
	    _has_ been updated, but not how.  As in almost all pubsub
	    systems, the publisher is unaware of the subscribers, if
	    any.  Other pubsub systems might call the publisher the
	    "source".
          </t>
	  <t hangText="Subscriber:">
	    an entity (person or program) that wants to be notified of
	    changed on a topic.  The subscriber can be directly
	    network-accessible or behind a NAT.
	  </t>
	  <t hangText="Subscription:">
	    a tuple (Topic URL, Subscriber).  For network-accessible
	    subscribers, the subscription's unique key is actually the
	    tuple (Topic URL, Subscriber Callback URL).  For NAT'd
	    subscribers, the unique key for a subscription is (Topic
	    URL, SubscriberToken).  In both cases, subscriptions may
	    (at the hub's decision) have expiration times akin to DHCP
	    leases and then must be renewed.
	  </t>
	  <t hangText="Event:">
	    an event that's visible to multiple topics.  For each
	    event that happens (e.g. "Brad posted to the Linux
	    Community."), multiple topics could be affected
	    (e.g. "Brad posted." and "Linux community has new post").
	    Publisher events update topics, and the hub looks up all
	    subscriptions for all affected topics, sending out
	    notifications to subscribers.
	  </t>
	  <t hangText="Notification:">
	    a delta on a topic, computed by the hub and sent to all
	    subscribers.  (TBD: format of this delta.  likely: an Atom
	    feed itself with just the new or changed stuff, and
	    gravestones for removed items?)  The notification can be
	    the result of a publisher telling the hub of an update, or
	    the hub proactively polling a topic feed, perhaps for a
	    subscriber subscribing to a topic that's not pubsub-aware.
	    Note also that a notification to a subscriber can be a
	    payload consisting of updates for multiple topics.
	    Publishers MAY choose to send multi-topic notifications as
	    an optimization for heavy subscribers, but subscribers
	    MUST understand them.
	  </t>
        </list>
      </t>
    </section>

  </middle>
  <back>

    <references title="References">

      <reference anchor="RFC2606">
        <front>
          <title>Reserved Top Level DNS Names</title>
          <author initials="D.E" surname="Eastlake" fullname="D. Eastlake">
            <organization></organization>
          </author>
          <author initials="A.P" surname="Panitz" fullname="A. Panitz">
            <organization></organization>
          </author>
        </front>
        <seriesInfo name="RFC" value="2606" />
      </reference>

      <reference anchor="RFC2119">
        <front>
          <title>
            Key words for use in RFCs to Indicate Requirement Levels
          </title>
          <author initials="B.S" surname="Bradner" fullname="Scott Bradner">
            <organization>Alis Technologies</organization>
          </author>
        </front>
        <seriesInfo name="RFC" value="2119" />
      </reference>

      <reference anchor="RFC2616">
        <front>
          <title>Hypertext Transfer Protocol -- HTTP/1.1</title>
          <author initials="R.F" surname="Fielding" fullname="R. Fielding">
            <organization>UC Irvine</organization>
          </author>
          <author initials="J.G" surname="Gettys" fullname="J. Gettys">
            <organization>Compaq/W3C</organization>
          </author>
          <author initials="J.M" surname="Mogul" fullname="J. Mogul">
            <organization>Compaq</organization>
          </author>
          <author initials="H.F" surname="Frystyk" fullname="H. Frystyk">
            <organization>W3C/MIT</organization>
          </author>
          <author initials="L.M" surname="Masinter" fullname="L. Masinter">
            <organization>Xerox</organization>
          </author>
          <author initials="P.L" surname="Leach" fullname="P. Leach">
            <organization>Microsoft</organization>
          </author>
          <author initials="T.L" surname="Berners-Lee" fullname="T. Berners-Lee">
            <organization>W3C/MIT</organization>
          </author>
        </front>
        <seriesInfo name="RFC" value="2616" />
      </reference>

      <reference anchor="RFC2617">
        <front>
          <title>
            HTTP Authentication: Basic and Digest Access Authentication
          </title>
          <author initials="J.F" surname="Franks" fullname="J. Franks">
            <organization />
          </author>
          <author initials="P.HB" surname="Hallam-Baker" fullname="P. Hallam-Baker">
            <organization />
          </author>
          <author initials="J.H" surname="Hostetler" fullname="J. Hostetler">
            <organization />
          </author>
          <author initials="S.L" surname="Lawrence" fullname="S. Lawrence">
            <organization />
          </author>
          <author initials="P.L" surname="Leach" fullname="P. Leach">
            <organization />
          </author>
          <author initials="A.L" surname="Luotonen" fullname="A. Luotonen">
            <organization />
          </author>
          <author initials="L.S" surname="Stewart" fullname="L. Stewart">
            <organization />
          </author>
        </front>
        <seriesInfo name="RFC" value="2617" />
      </reference>

      <reference anchor="RFC3629">
        <front>
          <title>
            UTF-8, a transformation format of Unicode and ISO 10646
          </title>
          <author initials="F.Y" surname="Yergeau" fullname="Francois Yergeau">
            <organization />
          </author>
        </front>
        <seriesInfo name="RFC" value="3629" />
      </reference>

      <reference anchor="RFC3986">
        <front>
          <title>Uniform Resource Identifiers (URI): Generic Syntax</title>
          <author initials="T.L" surname="Berners-Lee" fullname="T. Berners-Lee">
            <organization />
          </author>
        </front>
        <seriesInfo name="RFC" value="3986" />
      </reference>

      <reference anchor="RFC2045">
        <front>
          <title>Multipurpose Internet Mail Extensions (MIME) Part One: Format of Internet Message Bodies</title>
          <author initials="N.F" surname="Freed" fullname="N. Freed">
            <organization>Innosoft</organization>
          </author>
          <author initials="N.B" surname="Borenstein" fullname="N. Borenstein">
            <organization>First Virtual</organization>
          </author>
        </front>
        <seriesInfo name="RFC" value="2045" />
      </reference>

    </references>
  </back>

</rfc>
